# Требования к серверу для Food Estimation API

## Минимальные требования (для работы API)

### CPU сервер (рекомендуется для старта)

**Конфигурация:**
- **CPU**: 2-4 ядра
- **RAM**: 4-8 GB
- **Диск**: 20-50 GB SSD
- **OS**: Ubuntu 20.04+ / Debian 11+ / Windows Server

**Производительность:**
- Обработка одного изображения: 2-5 секунд
- Пропускная способность: ~10-20 запросов/минуту
- Подходит для: тестирования, MVP, небольших нагрузок

**Стоимость VPS:**
- Hetzner CPX11: €4.51/месяц (2 vCPU, 4 GB RAM)
- DigitalOcean Basic: $6/месяц (1 vCPU, 1 GB RAM) - мало!
- DigitalOcean Regular: $12/месяц (2 vCPU, 2 GB RAM)
- Vultr Regular: $6-12/месяц
- Timeweb (RU): ~500-1000₽/месяц

**Рекомендация:** Минимум 4 GB RAM, лучше 8 GB

---

## Рекомендуемые требования (для обучения модели)

### CPU сервер для обучения

**Конфигурация:**
- **CPU**: 4-8 ядер (чем больше, тем быстрее)
- **RAM**: 16-32 GB
- **Диск**: 50-100 GB SSD
- **OS**: Ubuntu 20.04+ / Debian 11+

**Производительность обучения:**
- 1000 образцов: ~30-60 минут
- 5000 образцов: ~2-4 часа
- Зависит от количества эпох и batch_size

**Стоимость:**
- Hetzner CPX31: €11.61/месяц (4 vCPU, 8 GB RAM)
- DigitalOcean CPU-Optimized: $24/месяц (4 vCPU, 8 GB RAM)
- Можно использовать только для обучения (временно)

---

## GPU сервер (опционально, для ускорения)

### GPU сервер для обучения и инференса

**Конфигурация:**
- **GPU**: NVIDIA GPU с 4-8 GB VRAM (GTX 1660, RTX 3060, Tesla T4)
- **CPU**: 4+ ядер
- **RAM**: 16+ GB
- **Диск**: 50-100 GB SSD

**Производительность:**
- Инференс: 0.5-1 секунда (в 5-10 раз быстрее CPU)
- Обучение: в 5-10 раз быстрее CPU

**Стоимость:**
- Vast.ai: $0.10-0.50/час (аренда GPU)
- RunPod: $0.20-0.50/час
- Hetzner GPU: €65+/месяц
- AWS EC2 g4dn.xlarge: ~$0.50/час
- **Рекомендация:** Использовать только для обучения, затем переключиться на CPU

---

## Размер диска (зависимости и модели)

### Необходимое место на диске:

- **Python окружение**: ~2 GB
- **PyTorch (CPU)**: ~1.5 GB
- **PyTorch (CUDA)**: ~3-4 GB
- **Transformers + модели**: ~2-5 GB
  - Food-101 модель: ~500 MB
  - Hugging Face кеш: ~1-3 GB
- **Данные обучения**: ~1-10 GB (зависит от количества изображений)
- **Обученные модели**: ~100-500 MB
- **База данных PostgreSQL**: ~1-5 GB (зависит от данных)

**Итого минимум:** 20 GB
**Рекомендуется:** 50-100 GB

---

## Сетевая пропускная способность

**Минимально:**
- 10 Mbps входящий/исходящий
- Для загрузки моделей из Hugging Face: лучше 50+ Mbps

**Рекомендуется:**
- 100 Mbps для комфортной работы
- Для обучения: чем больше, тем лучше (загрузка данных)

---

## Операционная система

### Рекомендуется:
- **Ubuntu 22.04 LTS** (самая популярная для серверов)
- **Debian 11/12**
- **Docker** должен быть установлен

### Windows Server:
- Работает, но Docker Desktop требует больше ресурсов
- Меньше оптимизирован для ML

---

## Итоговые рекомендации

### Для начала (тестирование/MVP):
```
CPU: 2-4 ядра
RAM: 4-8 GB
Диск: 20-50 GB SSD
Стоимость: $5-10/месяц
```

### Для обучения модели:
```
CPU: 4-8 ядер
RAM: 16-32 GB
Диск: 50-100 GB SSD
Стоимость: $12-30/месяц
ИЛИ временная аренда GPU: $0.20-0.50/час
```

### Для продакшена (средняя нагрузка):
```
CPU: 4 ядра
RAM: 8-16 GB
Диск: 50 GB SSD
Стоимость: $12-20/месяц
```

### Для продакшена (высокая нагрузка):
```
CPU: 8+ ядер
RAM: 16-32 GB
Диск: 100 GB SSD
ИЛИ GPU сервер: $30-100+/месяц
```

---

## Оптимизация затрат

1. **Начальный этап**: Используйте CPU сервер $5-10/месяц
2. **Обучение**: Арендуйте GPU на несколько часов ($1-5) вместо постоянного сервера
3. **Продакшен**: Вернитесь на CPU сервер после обучения
4. **Масштабирование**: Добавляйте серверы по мере роста нагрузки

---

## Мониторинг использования

Следите за:
- **RAM**: не должно быть < 500 MB свободной
- **CPU**: средняя загрузка < 80%
- **Диск**: свободное место > 10 GB
- **Сеть**: пропускная способность достаточна

---

## Дополнительные сервисы (опционально)

- **Nginx** (reverse proxy): минимальные требования
- **PostgreSQL**: включена в основные требования
- **SSL сертификат** (Let's Encrypt): бесплатно

